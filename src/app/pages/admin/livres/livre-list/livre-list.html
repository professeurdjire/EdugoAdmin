<div class="users-page-container">
  <div class="page-header">
    <h1 class="page-title">Livres</h1>
    <a routerLink="/admin/ajouterlivre" class="add-btn">Ajouter un livre</a>
  </div>

  <!-- Message d'erreur -->
  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <!-- Indicateur de chargement -->
  <div *ngIf="loading" class="loading-overlay">
    <div class="loading-spinner"></div>
    <p>Chargement des livres...</p>
  </div>

  <!-- Filtres -->
  <div class="filter" *ngIf="!loading && !error">
    <section class="filters-container">
      <div class="filter-group">
        <label>Recherche</label>
        <input type="text" placeholder="Titre, auteur..." [(ngModel)]="searchTerm" (keyup.enter)="applyFilters()" />
      </div>

      <div class="filter-group">
        <label>MatiÃ¨re</label>
        <select [(ngModel)]="selectedSubject" (change)="applyFilters()">
          <option value="">Toutes les matiÃ¨res</option>
          <option value="MathÃ©matiques">MathÃ©matiques</option>
          <option value="FranÃ§ais">FranÃ§ais</option>
          <option value="Anglais">Anglais</option>
          <option value="Histoire">Histoire</option>
        </select>
      </div>

      <div class="action-buttons">
        <button class="filter-btn" (click)="applyFilters()">Filtrer</button>
        <button class="reset-btn" (click)="resetFilters()">RÃ©initialiser</button>
      </div>
    </section>
  </div>

  <div class="table-header-info" *ngIf="!loading && !error">
    <h2>Liste des livres ({{ totalFiltered }})</h2>
  </div>

  <section class="users-table-section" *ngIf="!loading && !error">
    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>Livre</th>
            <th>AnnÃ©e</th>
            <th>MatiÃ¨re</th>
            <th>Langue</th>
            <th>Statut</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let livre of pagedLivres">
            <td class="user-details-cell">
              <div class="user-initials blue">BK</div>
              <div class="user-info-text">
                <p class="name">{{ livre.titre }}</p>
                <small class="email">Par {{ livre.auteur }}</small>
              </div>
            </td>
            <td>{{ livre.anneePublication }}</td>
            <td>{{ livre.matiere }}</td>
            <td>{{ livre.langue }}</td>
            <td><span class="status-badge active-status">Actif</span></td>
            <td class="actions-cell">
              <button class="action-icon-btn" (click)="viewLivre(livre)">ğŸ‘ï¸</button>
              <button class="action-icon-btn" (click)="editLivre(livre)">âœï¸</button>
              <button class="action-icon-btn" (click)="deleteLivre(livre)">ğŸ—‘ï¸</button>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Pagination -->
      <div class="book-list__footer" *ngIf="totalPages > 1">
        <p>Affichage de {{ ((currentPage - 1) * pageSize) + 1 }} Ã  {{ getMinValue(currentPage * pageSize, totalFiltered) }} sur {{ totalFiltered }} Livres</p>
        <nav class="pagination">
          <button class="pagination__arrow" (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">
            <span>â†</span>
          </button>
          <span *ngFor="let page of [].constructor(totalPages); let i = index"
                class="pagination__number" 
                [class.active]="(i + 1) === currentPage"
                (click)="changePage(i + 1)">
            {{ i + 1 }}
          </span>
          <button class="pagination__arrow" (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages">
            <span>â†’</span>
          </button>
        </nav>
      </div>
    </div>
  </section>
</div>