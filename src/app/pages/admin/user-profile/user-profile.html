<div class="profile-dropdown">
  <!-- Menu principal ultra-minimaliste -->
  <div class="dropdown-menu">
    <button class="dropdown-item" (click)="openProfileModal()">
      <i class="fas fa-user-edit"></i>
      <span>Modifier le profil</span>
    </button>

    <button class="dropdown-item" (click)="openPasswordModal()">
      <i class="fas fa-key"></i>
      <span>Changer mot de passe</span>
    </button>

    <button class="dropdown-item" (click)="openPreferencesModal()">
      <i class="fas fa-palette"></i>
      <span>Préférences</span>
    </button>

    <div class="menu-divider"></div>

    <button class="dropdown-item logout" (click)="onAction('logout')">
      <i class="fas fa-sign-out-alt"></i>
      <span>Déconnexion</span>
    </button>
  </div>

  <!-- Modal Modifier Profil -->
  <div *ngIf="showProfileModal" class="modal-overlay" (click)="closeProfileModal()">
    <div class="modal-container" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Modifier le profil</h3>
        <button class="close-btn" (click)="closeProfileModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="modal-body">
        <div class="form-group">
          <label>Prénom</label>
          <input type="text" [(ngModel)]="profileData.prenom" class="form-control" placeholder="Votre prénom">
        </div>

        <div class="form-group">
          <label>Nom</label>
          <input type="text" [(ngModel)]="profileData.nom" class="form-control" placeholder="Votre nom">
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="email" [(ngModel)]="profileData.email" class="form-control" placeholder="votre@email.com">
        </div>

        <div class="form-group">
          <label>Téléphone</label>
          <input type="tel" [(ngModel)]="profileData.telephone" class="form-control" placeholder="+223 XX XX XX XX">
        </div>
      </div>

      <div class="modal-actions">
        <button class="btn-secondary" (click)="closeProfileModal()">Annuler</button>
        <button class="btn-primary" (click)="updateProfile()">
          <i class="fas fa-save"></i>
          Enregistrer
        </button>
      </div>
    </div>
  </div>

  <!-- Modal Changer Mot de Passe -->
  <div *ngIf="showPasswordModal" class="modal-overlay" (click)="closePasswordModal()">
    <div class="modal-container" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Changer le mot de passe</h3>
        <button class="close-btn" (click)="closePasswordModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="modal-body">
        <div class="form-group">
          <label>Mot de passe actuel</label>
          <input type="password" [(ngModel)]="passwordData.currentPassword" 
                 class="form-control" placeholder="Entrez votre mot de passe actuel">
        </div>

        <div class="form-group">
          <label>Nouveau mot de passe</label>
          <input type="password" [(ngModel)]="passwordData.newPassword" 
                 class="form-control" placeholder="Entrez le nouveau mot de passe">
        </div>

        <div class="form-group">
          <label>Confirmer le mot de passe</label>
          <input type="password" [(ngModel)]="passwordData.confirmPassword" 
                 class="form-control" placeholder="Confirmez le nouveau mot de passe">
        </div>

        <div class="password-requirements">
          <small>Le mot de passe doit contenir au moins 8 caractères avec des chiffres et lettres</small>
        </div>
      </div>

      <div class="modal-actions">
        <button class="btn-secondary" (click)="closePasswordModal()">Annuler</button>
        <button class="btn-primary" (click)="changePassword()" [disabled]="!isPasswordFormValid()">
          <i class="fas fa-save"></i>
          Mettre à jour
        </button>
      </div>
    </div>
  </div>

  <!-- Modal Préférences -->
  <div *ngIf="showPreferencesModal" class="modal-overlay" (click)="closePreferencesModal()">
    <div class="modal-container" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Préférences</h3>
        <button class="close-btn" (click)="closePreferencesModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="modal-body">
        <div class="preference-section">
          <h4>Notifications</h4>
          <div class="preference-item">
            <label class="switch">
              <input type="checkbox" [(ngModel)]="preferences.emailNotifications">
              <span class="slider"></span>
            </label>
            <span>Notifications par email</span>
          </div>

          <div class="preference-item">
            <label class="switch">
              <input type="checkbox" [(ngModel)]="preferences.pushNotifications">
              <span class="slider"></span>
            </label>
            <span>Notifications push</span>
          </div>
        </div>

        <div class="preference-section">
          <h4>Apparence</h4>
          <div class="preference-item">
            <label>Thème</label>
            <select [(ngModel)]="preferences.theme" class="form-control">
              <option value="light">Clair</option>
              <option value="dark">Sombre</option>
              <option value="auto">Automatique</option>
            </select>
          </div>
        </div>

        <div class="preference-section">
          <h4>Langue</h4>
          <div class="preference-item">
            <select [(ngModel)]="preferences.language" class="form-control">
              <option value="fr">Français</option>
              <option value="en">English</option>
            </select>
          </div>
        </div>
      </div>

      <div class="modal-actions">
        <button class="btn-secondary" (click)="closePreferencesModal()">Annuler</button>
        <button class="btn-primary" (click)="updatePreferences()">
          <i class="fas fa-save"></i>
          Enregistrer
        </button>
      </div>
    </div>
  </div>
</div>