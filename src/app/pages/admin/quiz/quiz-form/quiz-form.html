<div class="form-main-container">
  <div class="ajout-quiz-container">
    <!-- Header -->
<<<<<<< HEAD
    <div class="header">
      <button class="retour-btn" (click)="onRetour()">
        <span class="arrow-back">‚Üê</span>
        <span>Retour</span>
      </button>
      <div class="page-title">Cr√©er un Quiz</div>
=======
    <div class="form-header">
      <h1 class="page-title">Ajouter un quiz</h1>
      <a routerLink="/admin/quizList" class="back-btn">
        <span class="arrow-back">‚Üê</span>
        <span>Retour</span>
      </a>
>>>>>>> 75509ae2bd5b938f745cbb99bb4ff67d3b55ba64
    </div>

  <!-- Main Content -->
  <div class="form-body">
      <div class="description">
        Cr√©ez un quiz interactif avec diff√©rents types de questions pour √©valuer vos apprenants !
      </div>

      <!-- Section 1: Informations de base -->
      <div class="section">
        <div class="section-header">
          <div class="section-icon">‚ÑπÔ∏è</div>
          <h3>Informations de base</h3>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Livre associ√© *</label>
            <div class="input-field">
              <input type="text" 
                     [(ngModel)]="quiz.livreAssocie" 
                     placeholder="Ex: Math√©matiques 4√®me"
                     class="form-input">
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Titre du quiz *</label>
            <div class="input-field">
              <input type="text" 
                     [(ngModel)]="quiz.titre" 
                     placeholder="Donnez un titre"
                     class="form-input">
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Dur√©e (minutes)</label>
            <div class="input-field">
              <input type="number" 
                     [(ngModel)]="quiz.duree" 
                     min="1" 
                     max="180"
                     class="form-input">
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Difficult√©</label>
            <div class="select-field">
              <select [(ngModel)]="quiz.difficulte" class="form-select">
                <option *ngFor="let niveau of niveauxDifficulte" [value]="niveau.value">
                  {{ niveau.label }}
                </option>
              </select>
            </div>
          </div>
        </div>

        <div class="form-group full-width">
          <label class="form-label">Description</label>
          <div class="textarea-field">
            <textarea [(ngModel)]="quiz.description" 
                     placeholder="Description d√©taill√©e du quiz..."
                     class="form-textarea"></textarea>
          </div>
        </div>
      </div>

      <!-- Section 2: Questions du quiz -->
      <div class="section" *ngFor="let question of quiz.questions; let i = index">
        <div class="section-header">
          <div class="section-icon">üìö</div>
          <h3>Question {{ question.numero }}</h3>
          <div class="question-actions">
            <button class="btn-action" (click)="dupliquerQuestion(i)" title="Dupliquer">
              <span class="btn-icon">üìã</span>
            </button>
            <button class="btn-action" (click)="deplacerQuestion(i, 'up')" 
                    [disabled]="i === 0" title="D√©placer vers le haut">
              <span class="btn-icon">‚¨ÜÔ∏è</span>
            </button>
            <button class="btn-action" (click)="deplacerQuestion(i, 'down')" 
                    [disabled]="i === quiz.questions.length - 1" title="D√©placer vers le bas">
              <span class="btn-icon">‚¨áÔ∏è</span>
            </button>
            <button class="btn-action btn-danger" (click)="supprimerQuestion(i)" 
                    [disabled]="quiz.questions.length === 1" title="Supprimer">
              <span class="btn-icon">üóëÔ∏è</span>
            </button>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Type de question *</label>
            <div class="select-field">
              <select [(ngModel)]="question.type" 
                      (change)="onTypeQuestionChange(i)"
                      class="form-select">
                <option *ngFor="let type of typesQuestions" [value]="type.value">
                  {{ type.icon }} {{ type.label }}
                </option>
              </select>
            </div>
            <div class="type-description">
              {{ getDescriptionType(question.type) }}
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Points</label>
            <div class="input-field">
              <input type="number" 
                     [(ngModel)]="question.points" 
                     min="1" 
                     max="10"
                     class="form-input">
            </div>
          </div>
        </div>

        <!-- Question Input -->
        <div class="form-group full-width">
          <label class="form-label">Question *</label>
          <div class="input-field">
            <input type="text" 
                   [(ngModel)]="question.question" 
                   placeholder="Saisissez la question..."
                   class="form-input">
          </div>
        </div>

        <!-- Contenu dynamique selon le type de question -->
        <div class="question-content">
          
          <!-- Questions √† choix multiples / Multi-r√©ponses -->
          <div *ngIf="question.type === 'choix_multiple' || question.type === 'multi_reponse' || question.type === 'case_a_cocher' || question.type === 'ordre'">
            <div class="reponses-header">
              <label class="form-label">R√©ponses</label>
              <button class="btn-add-reponse" (click)="ajouterReponse(i)" 
                      [disabled]="question.reponses.length >= 6">
                <span class="btn-icon">‚ûï</span>
                Ajouter une r√©ponse
              </button>
            </div>
            
            <div class="reponses-section">
              <div class="reponse-item" *ngFor="let reponse of question.reponses; let j = index">
                <div class="reponse-label">{{ reponse.lettre }}</div>
                <div class="input-field reponse-input">
                  <input type="text" 
                         [(ngModel)]="reponse.texte" 
                         [placeholder]="'R√©ponse ' + reponse.lettre"
                         class="form-input">
                </div>
                <button class="btn-checkbox" 
                        [class.correct]="reponse.correcte"
                        (click)="onReponseCorrecteChange(i, j, question.type)">
                  <span class="btn-icon">
                    {{ question.type === 'multi_reponse' || question.type === 'case_a_cocher' ? '‚òëÔ∏è' : 'üîò' }}
                  </span>
                </button>
                <button class="btn-action btn-danger" 
                        (click)="supprimerReponse(i, j)"
                        [disabled]="question.reponses.length <= 2">
                  <span class="btn-icon">üóëÔ∏è</span>
                </button>
              </div>
            </div>
          </div>

          <!-- Question Vrai/Faux -->
          <div *ngIf="question.type === 'vrai_faux'" class="vrai-faux-section">
            <div class="reponses-section">
              <div class="reponse-item" *ngFor="let reponse of question.reponses; let j = index">
                <div class="reponse-label">{{ reponse.lettre }}</div>
                <div class="reponse-text">{{ reponse.texte }}</div>
                <button class="btn-checkbox" 
                        [class.correct]="reponse.correcte"
                        (click)="onReponseCorrecteChange(i, j, question.type)">
                  <span class="btn-icon">üîò</span>
                </button>
              </div>
            </div>
          </div>

          <!-- R√©ponse courte -->
          <div *ngIf="question.type === 'reponse_courte'" class="reponse-courte-section">
            <label class="form-label">R√©ponse attendue *</label>
            <div class="input-field">
              <input type="text" 
                     [(ngModel)]="question.bonneReponse" 
                     placeholder="Saisissez la r√©ponse correcte..."
                     class="form-input">
            </div>
          </div>

          <!-- R√©ponse longue -->
          <div *ngIf="question.type === 'reponse_longue'" class="reponse-longue-section">
            <label class="form-label">R√©ponse attendue *</label>
            <div class="textarea-field">
              <textarea [(ngModel)]="question.bonneReponse" 
                       placeholder="Saisissez la r√©ponse correcte..."
                       class="form-textarea"></textarea>
            </div>
          </div>

          <!-- Appariement -->
          <div *ngIf="question.type === 'appariement'" class="appariement-section">
            <div class="appariement-header">
              <label class="form-label">Paires d'appariement</label>
              <button class="btn-add-reponse" (click)="ajouterPaireAppariement(i)">
                <span class="btn-icon">‚ûï</span>
                Ajouter une paire
              </button>
            </div>
            
            <div class="appariement-grid">
              <div class="appariement-header-row">
                <div class="appariement-col">√âl√©ment de gauche</div>
                <div class="appariement-col">√âl√©ment de droite</div>
                <div class="appariement-actions">Actions</div>
              </div>
              
              <div class="appariement-row" *ngFor="let paire of question.pairesAppariement; let j = index">
                <div class="appariement-col">
                  <div class="input-field">
                    <input type="text" 
                           [(ngModel)]="paire.elementGauche" 
                           placeholder="√âl√©ment √† associer..."
                           class="form-input">
                  </div>
                </div>
                <div class="appariement-col">
                  <div class="input-field">
                    <input type="text" 
                           [(ngModel)]="paire.elementDroit" 
                           placeholder="√âl√©ment correspondant..."
                           class="form-input">
                  </div>
                </div>
                <div class="appariement-actions">
                  <button class="btn-action btn-danger" 
                          (click)="supprimerPaireAppariement(i, j)"
                          [disabled]="question.pairesAppariement!.length <= 2">
                    <span class="btn-icon">üóëÔ∏è</span>
                  </button>
                </div>
              </div>
            </div>
          </div>

        </div>

        <!-- Indicateur de bonne r√©ponse -->
        <div *ngIf="question.type !== 'reponse_courte' && question.type !== 'reponse_longue' && question.type !== 'appariement'" 
             class="bonne-reponse-indicator">
          <span class="indicator-label">Bonne(s) r√©ponse(s) s√©lectionn√©e(s) :</span>
          <span class="indicator-value">
            {{ question.bonneReponse || 'Aucune' }}
          </span>
        </div>
      </div>

      <!-- Bouton pour ajouter une nouvelle question -->
      <div class="add-question-section">
        <button class="btn btn-add-question-large" (click)="ajouterQuestion()">
          <span class="btn-icon">‚ûï</span>
          <span>Ajouter une nouvelle question</span>
        </button>
      </div>

      <!-- R√©sum√© du quiz -->
      <div class="quiz-summary">
        <div class="summary-item">
          <span class="summary-label">Nombre de questions :</span>
          <span class="summary-value">{{ quiz.questions.length }}</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Points totaux :</span>
            <span class="summary-value">
              {{ totalPoints() }}
            </span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Dur√©e totale :</span>
          <span class="summary-value">{{ quiz.duree }} minutes</span>
        </div>
      </div>

      <!-- Actions -->
<<<<<<< HEAD
      <div class="actions-section">
        <button class="btn btn-cancel" (click)="onAnnuler()">
          <span class="btn-icon">üóëÔ∏è</span>
          <span>Annuler</span>
        </button>
        <button class="btn btn-submit" 
                (click)="onEnregistrerQuiz()"
                [disabled]="!estFormulaireValide()">
          <span class="btn-icon">üíæ</span>
          <span>Enregistrer le quiz</span>
        </button>
=======
      <div class="form-actions">
        <button class="btn btn-secondary btn-action">Annuler</button>
        <button class="btn btn-secondary btn-action">Ajouter une question</button>
        <button class="btn btn-primary btn-action">Enregistrer le quiz</button>
>>>>>>> 75509ae2bd5b938f745cbb99bb4ff67d3b55ba64
      </div>
    </div>
  </div>
</div>