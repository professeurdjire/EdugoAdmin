<header class="topbar">
  <div class="header-left">
    <button class="sidebar-toggle" (click)="toggleSidebar()">
      <i class="fa-solid fa-bars"></i>
    </button>
    <div class="logo">
      <span class="logo-heart">
        <img src="/images/logo1.png" alt="Logo Edugo" class="logo-img" />
      </span>
    </div>
  </div>
  <div class="header-right">
    <!-- IcÃ´ne de notification avec modal -->
    <div class="notification-wrapper">
      <a class="notification-icon" (click)="toggleNotifications()" style="cursor: pointer;">
        <i class="fa-solid fa-bell"></i>
        <span *ngIf="unreadCount > 0" class="notification-badge">{{unreadCount}}</span>
      </a>
      <app-notifications-modal 
        *ngIf="showNotifications"
        (close)="showNotifications = false">
      </app-notifications-modal>
    </div>

    <!-- Dans votre header -->
<div class="user-profile-wrapper">
  <div class="user-profile" (click)="toggleProfile()" style="cursor: pointer;">
    <div class="user-avatar-container">
      <div class="user-avatar">{{getUserInitials()}}</div>
    </div>
    <div class="user-details">
      <div class="user-fullname">{{user?.prenom}} {{user?.nom}}</div>
      <div class="user-role">{{getRoleDisplayName()}}</div>
    </div>
    <div class="dropdown-arrow">
      <i class="fa-solid fa-chevron-down" [class.rotated]="showProfile"></i>
    </div>
  </div>
  
  <!-- Le dropdown s'affiche directement ici -->
  <app-user-profile-dropdown 
    *ngIf="showProfile"
    [user]="user"
    (close)="showProfile = false"
    (action)="handleProfileAction($event)">
  </app-user-profile-dropdown>
</div>
  </div>
</header>